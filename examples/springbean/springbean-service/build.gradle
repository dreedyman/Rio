import org.apache.tools.ant.filters.ReplaceTokens

group = 'org.rioproject.examples.springbean'
description = 'Example :: SpringBean Service Implementation'
dependencies {
    compile group: 'org.springframework', name: 'spring-context', version: '5.2.7.RELEASE'
    compile project(':examples:springbean:springbean-api')
    compile project(':rio-lib')
    testCompile project(':rio-test')
    testCompile group: 'junit', name: 'junit', version: '4.8.2'
    testCompile group: 'ch.qos.logback', name: 'logback-classic', version: "${logbackVersion}"
}

test {
    dependsOn([':examples:springbean:springbean-api:publishToMavenLocal', publishToMavenLocal, "opstring"])
    systemProperty 'java.security.policy', policyAll
    systemProperty "rio.home", "${rootProject.projectDir.path}/distribution/build/rio-${version}"
}

task opstring(type: Copy) {
    from "${project.projectDir.path}/../src/main/opstring"
    into "${project.projectDir.path}/deploy"
    include "springbean.groovy"
    filter(ReplaceTokens, tokens: [version: project.version])
}